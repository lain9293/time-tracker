{"version":3,"sources":["utils/uuid.js","utils/localStorage.js","utils/timeCalc.js","index.js"],"names":["uuidv4","replace","c","r","Math","random","toString","localStore","getItem","key","type","value","window","localStorage","JSON","parse","setItem","stringify","removeItem","clear","timeSum","t1","t2","split","map","Number","hT1","mT1","rH","rM","App","useState","days","setDays","Date","newDay","setNewDay","currentDay","setCurrentDay","id","description","time","hide","newAction","setNewAction","dateOptions","year","month","day","some","d","onClick","newDays","showHidden","filter","date","toLocaleString","actions","length","a","reduce","acc","deleteDay","i","hideTo","idDay","idActive","deleteActive","onSubmit","e","preventDefault","addNewAction","placeholder","onChange","target","addNewDay","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.42763851.chunk.js","sourcesContent":["const uuidv4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport default uuidv4;","const localStore = {\n  getItem: (key, type) => { \n    const value = window.localStorage.getItem(key);\n    if (value) {\n      return JSON.parse(value);\n    }\n    switch (type) {\n      case 'Array':\n        return [];\n      case 'Object':\n        return {};\n      default:\n        return ''\n    }\n  },\n\n  setItem: (key, value) => {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  },\n\n  removeItem: (key) => {\n    window.localStorage.removeItem(key);\n  },\n\n  clear: () => {\n    window.localStorage.clear();\n  },\n};\n\nexport default localStore;","const timeSum = (t1, t2) => {\n  const [hT1, mT1] = t1.split(':').map(Number);\n  const [hT2, mT2] = t2.split(':').map(Number);\n  let rH = hT1 + hT2;\n  let rM = mT1 + mT2;\n  if (rM >= 60) {\n    rH++;\n    rM -= 60;\n  }\n  return `${rH < 10 ? '0' + rH : rH}:${rM < 10 ? '0' + rM : rM}`;\n}\n\nexport default timeSum;","import React, { useState } from 'react'\nimport ReactDOM from 'react-dom'\nimport uuidv4 from './utils/uuid.js'\nimport localStore from './utils/localStorage.js'\nimport timeSum from './utils/timeCalc.js'\n\nconst App = () => {\n  const [days, setDays] = useState(localStore.getItem('days', 'Array'))\n  const [newDay, setNewDay] = useState(new Date())\n  const [currentDay, setCurrentDay] = useState('')\n  const [newAction, setNewAction] = useState({\n    id: uuidv4(),\n    description: '',\n    time: '',\n    hide: false,\n  })\n\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  }\n\n  const addNewDay = () => {\n    const id = uuidv4()\n    const newDays = [...days, { id, date: newDay, actions: [] }]\n    setDays(newDays)\n    setCurrentDay(id)\n    localStore.setItem('days', newDays)\n  }\n\n  const selectCurrentDay = (id) => {\n    if (currentDay === id) {\n      setCurrentDay('')\n    } else {\n      setCurrentDay(id)\n    }\n  }\n\n  const addNewAction = (e, id) => {\n    e.preventDefault()\n    const newDays = days.map((d) => {\n      if (d.id === id) {\n        d.actions = [...d.actions, newAction]\n      }\n      return d\n    })\n    setDays(newDays)\n    localStore.setItem('days', newDays)\n    setNewAction({ id: uuidv4(), description: '', time: '' })\n  }\n\n  const deleteDay = (id) => {\n    const newDays = days.filter((d) => d.id !== id)\n    setDays(newDays)\n    localStore.setItem('days', newDays)\n  }\n\n  const hideTo = (id) => {\n    const newDays = [...days];\n    for (let i = 0; i < newDays.length; i++) {\n      if (newDays[i].id !== id) {\n        newDays[i].hide = true;\n      }\n      else {\n        newDays[i].hide = true;\n        break;\n      }\n    }\n    setDays(newDays)\n    localStore.setItem('days', newDays)\n  }\n\n  const showHidden = () => {\n    const newDays = days.map((d) => {\n      d.hide = false;\n      return d;\n    })\n    setDays(newDays)\n    localStore.setItem('days', newDays)\n  }\n\n  const deleteActive = (idDay, idActive) => {\n    const newDays = days.map((d) => {\n      if (d.id === idDay) {\n        d.actions = d.actions.filter((a) => a.id !== idActive)\n      }\n      return d\n    })\n    setDays(newDays)\n    localStore.setItem('days', newDays)\n  }\n\n  const formatDate = (date) => {\n    if (typeof date === 'string') {\n      return new Date(date).toLocaleString('ru', dateOptions)\n    }\n    return date.toLocaleString('ru', dateOptions)\n  }\n\n  return (\n    <div>\n      {days.some(d => d.hide) && (<input\n        type=\"button\"\n        value=\"Показать скрытые\"\n        onClick={() => showHidden()}\n      />)}\n      <ul>\n        {days.filter(d => !d.hide).map((d) => (\n          <li key={d.id}>\n            <span onClick={() => selectCurrentDay(d.id)}>\n              Дата: {formatDate(d.date)} Сумма времени:\n              {d.actions.length &&\n                d.actions\n                  .map((a) => a.time)\n                  .reduce((acc, a) => timeSum(a, acc))}\n            </span>\n            {currentDay === d.id ? (\n              <span>\n                <input\n                  type=\"button\"\n                  value=\"Удалить день\"\n                  onClick={() => deleteDay(d.id)}\n                />\n                <input\n                  type=\"button\"\n                  value=\"Скрыть до сюда\"\n                  onClick={() => hideTo(d.id)}\n                />\n              </span>\n            ) : (\n              ''\n            )}\n            {currentDay === d.id && (\n              <div>\n                <ul>\n                  {d.actions.map((a) => (\n                    <li key={a.id}>\n                      Описание: {a.description} Время: {a.time}\n                      <input\n                        type=\"button\"\n                        value=\"Удалить активность\"\n                        onClick={() => deleteActive(d.id, a.id)}\n                      />\n                    </li>\n                  ))}\n                </ul>\n                <form type=\"submit\" onSubmit={(e) => addNewAction(e, d.id)}>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Описание\"\n                    value={newAction.description}\n                    onChange={(e) => {\n                      setNewAction({\n                        ...newAction,\n                        description: e.target.value,\n                      })\n                    }}\n                  />\n                  <input\n                    type=\"time\"\n                    value={newAction.time}\n                    onChange={(e) => {\n                      setNewAction({\n                        ...newAction,\n                        time: e.target.value,\n                      })\n                    }}\n                  />\n                  <input type=\"submit\" value=\"Добавить\" />\n                </form>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n      <input\n        type=\"date\"\n        value={newDay}\n        onChange={(e) => {\n          setNewDay(e.target.value)\n        }}\n      />\n      <input type=\"button\" value=\"Добавить день\" onClick={() => addNewDay()} />\n    </div>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}